#!/usr/bin/env node
import h from"yargs";import{hideBin as w}from"yargs/helpers";import{resolve as v}from"path";import f from"puppeteer";async function a({inputs:o=[],extension:n="",openExtensionPage:b=void 0,devtools:p=!1,ignoreHTTPSErrors:c=!0,ignoreDefaultArgs:d=!1,port:i=0,dotenv:g=!0,...x}={}){let e=new Set(o);i&&e.add(`https://localhost:${i}/`);let r=[];if(n){let t=v(process.cwd(),n);r.push(`--load-extension=${t}`)}g&&await import("dotenv/config");let s=await f.launch({headless:!1,devtools:p,ignoreDefaultArgs:d?!0:["--disable-extensions"],args:[...r],defaultViewport:null,ignoreHTTPSErrors:c});for(e.size&&console.log("open urls: ",[...e.values()]);(await s.pages()).length<e.size;)await s.newPage();let m=await s.pages();await Promise.allSettled(m.map((t,u)=>t.goto([...e.values()][u]))),console.log("All pages opened")}l();async function l(){let o=await h(w(process.argv)).scriptName("chrome-dev").string("extension").describe("extension","extension mode").number("port").describe("port","open http://localhost:port").boolean("dotenv").describe("dotenv","load .env setting").boolean("devtools").describe("devtools","open devtools everypage").alias("d","devtools").alias("e","extension").alias("p","port").alias("h","help").alias("v","version").help().version().epilog("(C) snomiao.com 2022").argv;await a({...o,inputs:o._.map(String)})}export{l as default};
//# sourceMappingURL=cli.min.mjs.map
